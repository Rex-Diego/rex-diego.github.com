<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Rex与藻藻泥</title>
  
  <subtitle>love &amp; peace</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-12-02T01:39:19.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Rex</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>内网穿透</title>
    <link href="http://yoursite.com/2018/12/02/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <id>http://yoursite.com/2018/12/02/内网穿透/</id>
    <published>2018-12-02T00:48:29.000Z</published>
    <updated>2018-12-02T01:39:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>问题描述：<br>现在有三台机器：<br>star：中科院内网服务器，无法直接从外网访问，IP：172.16.0.72<br>jump：中科院跳板服务器，可以从内外网访问，但是只有端口22，IP：159.226.113.51<br>mine：家里的电脑，或PC或Mac，IP：不重要！ok？不重要！</p><p>那么，想从家里向服务器传数据，或者下数据怎么破？尤其不想手动跳板怎么破？</p><h1 id="Mac-amp-Linux"><a href="#Mac-amp-Linux" class="headerlink" title="Mac &amp; Linux"></a>Mac &amp; Linux</h1><h2 id="SSH访问"><a href="#SSH访问" class="headerlink" title="SSH访问"></a>SSH访问</h2><h3 id="mine-gt-jump-gt-star"><a href="#mine-gt-jump-gt-star" class="headerlink" title="mine -&gt; jump -&gt; star"></a>mine -&gt; jump -&gt; star</h3><p>这样是带图形界面的，可以<code>xeyes</code>进行测试：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -t -o ProxyCommand=<span class="string">'ssh -Y dam@159.226.113.51 -W 172.16.0.72:22'</span> -Y zy@172.16.0.72</span><br></pre></td></tr></table></figure><p>当然，通常我会在<code>~/.bashrc</code>建立一个alias，省的每次敲着一大串：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> sjumpstar=<span class="string">"ssh -t -o ProxyCommand='ssh -Y dam@159.226.113.51 -W 172.16.0.72:22' -Y zy@172.16.0.72"</span></span><br></pre></td></tr></table></figure><p>其中<code>-t</code>是指远程建立一个tty，<code>-o ProxyCommand</code>是设置设定远程代理执行命令的option，<code>-Y</code>是指建立信任的X11传输协议。</p><h2 id="scp-rsync传输文件"><a href="#scp-rsync传输文件" class="headerlink" title="scp rsync传输文件"></a>scp rsync传输文件</h2><h3 id="mine-gt-jump-gt-star-1"><a href="#mine-gt-jump-gt-star-1" class="headerlink" title="mine -&gt; jump -&gt; star"></a>mine -&gt; jump -&gt; star</h3><p>scp进行传输，少量传输还挺好，大量数据的备份不推荐：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r -o ProxyCommand=<span class="string">'ssh dam@159.226.113.51 -W 172.16.0.72:22'</span> zy@172.16.0.72:~/data ./data</span><br></pre></td></tr></table></figure><p>其中<code>-r</code>指recursively递归复制，复制单独文件时可以拿掉。</p><p>rsync传输，老司机的同步命令，适合大量数据的备份，支持断点续传：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -avPH -e <span class="string">"ssh -t -o ProxyCommand='ssh dam@159.226.113.51 -W 172.16.0.72:22'"</span> zy@172.16.0.72:~/data ./data</span><br></pre></td></tr></table></figure><h3 id="star-gt-jump-gt-mine"><a href="#star-gt-jump-gt-mine" class="headerlink" title="star -&gt; jump -&gt; mine"></a>star -&gt; jump -&gt; mine</h3><p>也很简单，反过来写：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r -o ProxyCommand=<span class="string">'ssh dam@159.226.113.51 -W 172.16.0.72:22'</span> ./data zy@172.16.0.72:~/data</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -avPH -e <span class="string">"ssh -t -o ProxyCommand='ssh dam@159.226.113.51 -W 172.16.0.72:22'"</span> ./data zy@172.16.0.72:~/data</span><br></pre></td></tr></table></figure><p>当然，也有很多其他方法，比如笨笨的<code>zssh</code>；以及操作复杂的ssh映射本地socks再通过Proxifier配置代理；sshfs应该也可以实现，改日可以再聊。</p><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>一直认为<a href="https://mobaxterm.mobatek.net" target="_blank" rel="noopener">Mobaxterm</a>比Xshell好用很多，这里可以再次推荐下。首先，它是免费的（至少免费版够用）；其次，内置cygwin为底层更加方便，所以以上命令直接写在Moba的local terminal里面就可以直接用，而且左边的简易文件管理器基本做到无缝衔接。最重要的，UI漂亮，可定制！</p><p>如果想保存这种设定，也很简单，新建ssh对话的时候有Proxy的选项，把跳板服务器的信息填进去就可以了。</p><p><img src="/images/moba_ssh.jpeg" alt="新建ssh对话的时候有Proxy的选项"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;问题描述：&lt;br&gt;现在有三台机器：&lt;br&gt;star：中科院内网服务器，无法直接从外网访问，IP：172.16.0.72&lt;br&gt;jump：中科院跳板服务器，可以从内外网访问，但是只有端口22，IP：159.226.113.51&lt;br&gt;mine：家里的电脑，或PC或Mac，IP
      
    
    </summary>
    
      <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    
      <category term="tech" scheme="http://yoursite.com/tags/tech/"/>
    
  </entry>
  
  <entry>
    <title>mac spin-up</title>
    <link href="http://yoursite.com/2018/11/29/mac-spin-up/"/>
    <id>http://yoursite.com/2018/11/29/mac-spin-up/</id>
    <published>2018-11-29T11:26:54.000Z</published>
    <updated>2018-12-02T00:41:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="zero"><a href="#zero" class="headerlink" title="(zero)"></a>(zero)</h2><p>网络环境是一切的基础，真正高效的人不寄希望于国内镜像。<br><a href="https://github.com/erguotou520/electron-ssr/releases" target="_blank" rel="noopener">https://github.com/erguotou520/electron-ssr/releases</a></p><h2 id="Brew"><a href="#Brew" class="headerlink" title="Brew"></a>Brew</h2><p>见到一台嗷嗷待哺的mac，废话不多说，第一件事brew起来。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure><p>直接测试<code>git</code>，不能用会弹提示，顺便装好python，真是贴心。当然也可以<code>xcode-select --install</code>。</p><p>基本操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew search xxx     <span class="comment"># 模糊搜索某个软件</span></span><br><span class="line">brew install xxx    <span class="comment"># 安装某个软件</span></span><br><span class="line">brew upgrade xxx    <span class="comment"># 升级某个软件</span></span><br><span class="line">brew uninstall xxx  <span class="comment"># 卸载某个软件</span></span><br><span class="line">brew list xxx       <span class="comment"># 列出某个软件的所有相关文件</span></span><br></pre></td></tr></table></figure><h3 id="命令行工具系列"><a href="#命令行工具系列" class="headerlink" title="命令行工具系列"></a>命令行工具系列</h3><p>wget下载点东西少不了的，偶尔挂个torrent活着magnet资源就要上aria2了，proxychains做命令行下的局部代理，sshfs＋vifm管理本地与远程文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew install </span><br><span class="line">    wget \              <span class="comment">#初级下载</span></span><br><span class="line">    aria2c \            <span class="comment">#进阶下载</span></span><br><span class="line">    proxychains-ng \    <span class="comment">#网络代理后面的命令</span></span><br><span class="line">    sshfs \             <span class="comment">#ssh挂载到本地作为磁盘</span></span><br><span class="line">    vifm                <span class="comment">#vim模式、命令行端的Total Commander</span></span><br></pre></td></tr></table></figure><h3 id="Cask-APP系列"><a href="#Cask-APP系列" class="headerlink" title="Cask APP系列"></a>Cask APP系列</h3><h4 id="免费区"><a href="#免费区" class="headerlink" title="免费区"></a>免费区</h4><p>Safari很好，但是我依然选择chrome＋firefox双开：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install google-chrome firefox</span><br></pre></td></tr></table></figure><p>当然，通常我也需要多个浏览器作为单独的环境：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install chromium waterfox vivaldi tor-browser</span><br></pre></td></tr></table></figure><p>编辑器我选择Vim＋Emacs/Spacemacs，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew install macvim</span><br><span class="line">ln -Fs `find /usr/<span class="built_in">local</span> -name <span class="string">"MacVim.app"</span>` /Applications/ ＃linkapps命令被brew废了。。心塞</span><br><span class="line"></span><br><span class="line">brew tap d12frosted/emacs-plus</span><br><span class="line">brew install emacs-plus</span><br></pre></td></tr></table></figure><p>一些常规App：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">brew cask install \</span><br><span class="line">    alfred \            <span class="comment">#spotlight升级以后也不怎么用得到了，但是可拓展性确实强，比较耐玩</span></span><br><span class="line">    caffeine \          <span class="comment">#“mac，两小时内不许睡”</span></span><br><span class="line">    cheatsheet \        <span class="comment">#“那个快捷键是什么来着”，“长按command”</span></span><br><span class="line">    docker \            <span class="comment">#专治水土不服</span></span><br><span class="line">    dropbox \           <span class="comment">#催眠：18G够用了</span></span><br><span class="line">    google-drive \      <span class="comment">#催眠：17G够用了</span></span><br><span class="line">    onedrive \          <span class="comment">#5T真的不够啊！</span></span><br><span class="line">    flux \              <span class="comment">#保护眼睛，从使用黄色屏幕开始。。</span></span><br><span class="line">    sublime-text \      <span class="comment">#Atom最棒，Subl真香</span></span><br><span class="line">    qq \                <span class="comment">#屈服于鹅肠</span></span><br><span class="line">    wechat \            <span class="comment">#不服不行</span></span><br><span class="line">    evernote \          <span class="comment">#从evernote到onenote是一个漫长的过程</span></span><br><span class="line">    owncloud \          <span class="comment">#不用国内云，别问我问什么</span></span><br><span class="line">    scroll-reverser \   <span class="comment">#没有magicmouse也不担心反人类的滚轮方向</span></span><br><span class="line">    rmtrash \           <span class="comment">#妈妈在也不担心我在命令行下rm误删了</span></span><br><span class="line">    htop \              <span class="comment">#监视、管理你的系统进程</span></span><br><span class="line">    mactex \            <span class="comment">#写论文。。</span></span><br><span class="line">    panoply \           <span class="comment">#不学大气的人表示：这什么鬼</span></span><br><span class="line">    neteasemusic \      <span class="comment">#网易云音乐</span></span><br><span class="line">    free-download-manager \ <span class="comment">#支持各种下载</span></span><br><span class="line">    qlcolorcode \       <span class="comment">#空格键预览高亮代码</span></span><br><span class="line">    qlstephen \         <span class="comment">#预览README文件</span></span><br><span class="line">    qlmarkdown  \       <span class="comment">#预览md文件</span></span><br><span class="line">    java \              <span class="comment">#java环境</span></span><br><span class="line">    xquartz \           <span class="comment">#ssh -Y看不到GUI不怪你，因为需要重启</span></span><br><span class="line">    iina                <span class="comment">#真的良心，开源免费，堪比Windows下的Potplayer</span></span><br></pre></td></tr></table></figure><p>如果你愿意也可以加个字体：<br>加两个源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap homebrew/cask-fonts</span><br><span class="line">brew cask install font-source-code-pro</span><br></pre></td></tr></table></figure><h4 id="收费区"><a href="#收费区" class="headerlink" title="收费区"></a>收费区</h4><p>装了Moom多年，很少用，因为Hyperdock的 <code>ctrl＋opt＋上/下/左/右</code> 满足了我大多数时候整理窗口的需求，在mac下找到windows的窗口管理体验。dock收费，switch免费。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install hyperdock hyperswitch</span><br></pre></td></tr></table></figure><p>常规软件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">brew cask install </span><br><span class="line">    surge \                 <span class="comment">#网络代理</span></span><br><span class="line">    proxifier \             <span class="comment">#将socks真正变成系统级别代理</span></span><br><span class="line">    cleanmymac \            <span class="comment">#论功能我服，UI我更服</span></span><br><span class="line">    endnote \               <span class="comment">#文献管理</span></span><br><span class="line">    microsoft-office \      <span class="comment">#2016、2019已经相当好了</span></span><br><span class="line">    iTerms                  <span class="comment">#都说比Termimal好用</span></span><br></pre></td></tr></table></figure><p>放不下windows？你想要的我都有：<code>parallel-desktop</code></p><h2 id="MAS"><a href="#MAS" class="headerlink" title="MAS"></a>MAS</h2><p>不堪忍受App Store的低效率，于是有了MAS。之所以这一部分不用brew是考虑到苹果的授权管理比较方便，不需要保存购买一家家软件的许可凭证，所以App Store上架的应用我一般就直接买了而不是去其自己家的网站下载。</p><p>安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mas</span><br></pre></td></tr></table></figure><p>常规操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mas search xxx</span><br><span class="line">mas install xxx</span><br></pre></td></tr></table></figure><p>常用的装了：</p><p>PDF export<br>Spark<br>Paste 2<br>Popclip<br>iThoughtsX<br>Evernote<br>Day One<br>Eudic</p><p>不常用的也装了：</p><p>DaisyDisk<br>Movist<br>Pin<br>Magnet<br>EasyRes<br>Forklift<br>Growl<br>Battery Charging Alert<br>Reeder 3</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;zero&quot;&gt;&lt;a href=&quot;#zero&quot; class=&quot;headerlink&quot; title=&quot;(zero)&quot;&gt;&lt;/a&gt;(zero)&lt;/h2&gt;&lt;p&gt;网络环境是一切的基础，真正高效的人不寄希望于国内镜像。&lt;br&gt;&lt;a href=&quot;https://github.com
      
    
    </summary>
    
      <category term="IT" scheme="http://yoursite.com/categories/IT/"/>
    
    
      <category term="software" scheme="http://yoursite.com/tags/software/"/>
    
  </entry>
  
</feed>
